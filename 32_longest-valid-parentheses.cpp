//ç»™ä½ ä¸€ä¸ªåªåŒ…å« '(' å’Œ ')' çš„å­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºæœ€é•¿æœ‰æ•ˆï¼ˆæ ¼å¼æ­£ç¡®ä¸”è¿ç»­ï¼‰æ‹¬å·å­ä¸²çš„é•¿åº¦ã€‚ 
//
// 
//
// 
// 
// ç¤ºä¾‹ 1ï¼š 
// 
// 
//
// 
//è¾“å…¥ï¼šs = "(()"
//è¾“å‡ºï¼š2
//è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ "()"
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//è¾“å…¥ï¼šs = ")()())"
//è¾“å‡ºï¼š4
//è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ "()()"
// 
//
// ç¤ºä¾‹ 3ï¼š 
//
// 
//è¾“å…¥ï¼šs = ""
//è¾“å‡ºï¼š0
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// 0 <= s.length <= 3 * 10â´ 
// s[i] ä¸º '(' æˆ– ')' 
// 
//
// Related Topics æ ˆ å­—ç¬¦ä¸² åŠ¨æ€è§„åˆ’ ğŸ‘ 2281 ğŸ‘ 0

#include<bits/stdc++.h>

using namespace std;

//leetcode submit region begin(Prohibit modification and deletion)
class Solution
{
public:
    int longestValidParentheses2(string s)
    {
        stack<int> st;  //å­˜å‚¨å­—ç¬¦ä¸²ç´¢å¼•
        st.push(-1); //ä½œä¸ºå‚è€ƒç‰©
        int maxLen = 0;
        for (int i = 0; i < s.length(); i++)
        {   //å¦‚æœæ˜¯å·¦æ‹¬å·ï¼Œåˆ™å…¥æ ˆ
            if (s[i] == '(')
            {
                st.push(i);
            } else
            {//å¦‚æœæ˜¯å³æ‹¬å·ï¼Œåˆ™æ ˆé¡¶å…ƒç´ å‡ºæ ˆï¼›
                st.pop();
                //å‡ºæ ˆå…ƒç´ å¯èƒ½æ˜¯'('çš„ç´¢å¼•ï¼Œä¹Ÿå¯èƒ½æ˜¯'-1'ï¼›
                //å¦‚æœæ˜¯-1ï¼Œåˆ™æ ˆç©ºï¼Œæ­¤æ—¶éœ€è¦å°†å³æ‹¬å·å…¥æ ˆä½œä¸ºå‚è€ƒç‰©ï¼Œå¦‚æœä¸‹ä¸€ä¸ªå­—ç¬¦ä»»ç„¶æ˜¯å³æ‹¬å·ï¼Œåˆ™æ­¤å³æ‹¬å·å‡ºæ ˆï¼Œä¸‹ä¸€ä¸ªå…¥æ ˆï¼›
                //è¿™ä¸ªæ— æ³•åŒ¹é…çš„æœ‰æ‹¬å·å’Œ'-1'ä¸€æ ·ï¼Œæ˜¯ä¸‹ä¸€ç»„æœ‰æ•ˆæ‹¬å·çš„èµ·å§‹ä½ç½®ï¼Œç”¨ä»¥è®¡ç®—æœ‰æ•ˆæ‹¬å·é•¿åº¦
                if (st.empty())
                {
                    st.push(i);
                }
                    //å¦‚æœæ ˆæœªç©ºï¼Œåˆ™è¯´æ˜å‡ºæ ˆå…ƒç´ ä¸ºå·¦æ‹¬å·ï¼Œæ­¤æ—¶è®¡ç®—å¹¶æ¯”è¾ƒä¸€ä¸‹æœ€å¤§æœ‰æ•ˆé•¿åº¦
                else
                {
                    maxLen = max(i - st.top(), maxLen);
                }
            }
        }
        return maxLen;
    }

    int longestValidParentheses(string s)
    {
        int maxLen = 0;
        int len = s.length();
        vector<int> dp(len, 0);
        for (int i = 1; i < len; i++)
        {
            if (s[i] == ')')
            {
                if (s[i - 1] == '(')
                {
                    if (i - 2 >= 0)
                    {
                        dp[i] = dp[i - 2] + 2;
                    } else
                    {
                        dp[i] = 2;
                    }
                }
                else if (i - dp[i - 1] - 1 >= 0 && s[i - dp[i - 1] - 1] == '(')
                {
                    if (i - dp[i - 1] - 2 >= 0)
                    {
                        dp[i] = dp[i - 1] + 2 + dp[i - dp[i - 1] - 2];
                    } else
                    {
                        dp[i] = dp[i - 1] + 2;
                    }
                }
            }
            maxLen = max(maxLen, dp[i]);
        }
        return maxLen;
    }
};

//leetcode submit region end(Prohibit modification and deletion)
